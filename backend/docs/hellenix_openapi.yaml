openapi: 3.0.3
info:
  title: Hellenix Blog API
  version: 1.0.0
servers:
  - url: http://localhost:3001/api

paths:
  /auth/register:
    post:
      summary: Register a new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username: { type: string }
                email: { type: string }
                password: { type: string }
              required: [username, email, password]
      responses:
        '201':
          description: User registered

  /auth/login:
    post:
      summary: Login user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email: { type: string }
                password: { type: string }
              required: [email, password]
      responses:
        '200':
          description: Logged in

  /users/me:
    get:
      security: [{ bearerAuth: [] }]
      summary: Get current user profile
      responses:
        '200': { description: OK }

  /users/update-me:
    patch:
      security: [{ bearerAuth: [] }]
      summary: Update own profile
      responses:
        '200': { description: Updated }

  /users/update-password:
    patch:
      security: [{ bearerAuth: [] }]
      summary: Change own password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                currentPassword: { type: string }
                newPassword: { type: string }
              required: [currentPassword, newPassword]
      responses:
        '200': { description: Password updated }

  /users:
    get:
      security: [{ bearerAuth: [] }]
      summary: Admin - list users
      responses:
        '200': { description: OK }

  /users/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string }
    get:
      security: [{ bearerAuth: [] }]
      summary: Admin - get user
      responses:
        '200': { description: OK }
    patch:
      security: [{ bearerAuth: [] }]
      summary: Admin - update user
      responses:
        '200': { description: OK }
    delete:
      security: [{ bearerAuth: [] }]
      summary: Admin - delete user
      responses:
        '204': { description: Deleted }

  /categories:
    get:
      summary: List categories
      responses:
        '200': { description: OK }
    post:
      security: [{ bearerAuth: [] }]
      summary: Admin - create category
      responses:
        '201': { description: Created }

  /categories/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string }
    get:
      summary: Get category
      responses:
        '200': { description: OK }
    patch:
      security: [{ bearerAuth: [] }]
      summary: Admin - update category
      responses:
        '200': { description: OK }
    delete:
      security: [{ bearerAuth: [] }]
      summary: Admin - delete category
      responses:
        '204': { description: Deleted }

  /tags:
    get:
      summary: List tags
      responses:
        '200': { description: OK }
    post:
      security: [{ bearerAuth: [] }]
      summary: Admin - create tag
      responses:
        '201': { description: Created }

  /tags/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string }
    get:
      summary: Get tag
      responses:
        '200': { description: OK }
    patch:
      security: [{ bearerAuth: [] }]
      summary: Admin - update tag
      responses:
        '200': { description: OK }
    delete:
      security: [{ bearerAuth: [] }]
      summary: Admin - delete tag
      responses:
        '204': { description: Deleted }

  /articles:
    get:
      summary: List published articles
      responses:
        '200': { description: OK }
    post:
      security: [{ bearerAuth: [] }]
      summary: Create article
      responses:
        '201': { description: Created }

  /articles/me:
    get:
      security: [{ bearerAuth: [] }]
      summary: Get articles of current user
      responses:
        '200': { description: OK }

  /articles/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string }
    get:
      summary: Get article
      responses:
        '200': { description: OK }
    patch:
      security: [{ bearerAuth: [] }]
      summary: Update article
      responses:
        '200': { description: OK }
    delete:
      security: [{ bearerAuth: [] }]
      summary: Delete article
      responses:
        '204': { description: Deleted }

  /articles/{id}/publish:
    patch:
      security: [{ bearerAuth: [] }]
      summary: Publish article
      responses:
        '200': { description: OK }

  /articles/{articleId}/reviews:
    parameters:
      - name: articleId
        in: path
        required: true
        schema: { type: string }
    get:
      summary: List article reviews
      responses:
        '200': { description: OK }
    post:
      security: [{ bearerAuth: [] }]
      summary: Create review
      responses:
        '201': { description: Created }

  /reviews/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string }
    patch:
      security: [{ bearerAuth: [] }]
      summary: Update review
      responses:
        '200': { description: OK }
    delete:
      security: [{ bearerAuth: [] }]
      summary: Delete review
      responses:
        '204': { description: Deleted }

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
